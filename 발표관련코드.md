## 1. 폴더 구조

```plaintext
📦 src
┣ 📂 components   # 재사용 가능한 UI 컴포넌트
┣ 📂 pages        # 각 페이지 (Home, Login, SignUp 등)
┣ 📂 services     # 비즈니스 로직 (회원가입, 로그인 등)
┣ 📂 api          # API 호출 관련 코드
┣ 📂 constants    # 공통 사용되는 상수
┣ 📂 utils        # 공통 유틸리티 함수
┣ 📂 css          # 스타일 파일
┗ 📜 app.js       # 라우팅 및 초기화 로직
┗ 📜 routes.js    # 라우팅 객체
```

## 2. 렌더링 과정

```HTML
<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>오픈 마켓 서비스</title>
    <link rel="stylesheet" href="/src/css/style.css" />
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/app.js"></script>
  </body>
</html>
```

```javascript
const ROUTES = {
  HOME: "/",
  LOGIN: "/login",
  PRODUCT: "/product/:id",
  SIGNUP: "/signup",
  NOT_FOUND: "404",
};
const routes = {
  [ROUTES.HOME]: Home,
  [ROUTES.LOGIN]: Login,
  [ROUTES.PRODUCT]: ProductDetail,
  [ROUTES.SIGNUP]: SignUp,
};
// DOM 업데이트 함수
const updateDOM = (html) => {
  const app = document.getElementById("app");
  app.innerHTML = "";
  app.insertAdjacentHTML("afterbegin", html);
};
// 동적 경로 처리 함수
const handleDynamicRoute = async (path) => {
  const dynamicMatch = path.match(/^\/product\/(\d+)$/);
  // 첫 번째 요소: 정규식과 매칭된 전체 문자열 ex ) "/product/123"
  // 두 번째 요소: 정규식의 캡처 그룹에 매칭된 값들 ex ) "상품 ID"
  if (dynamicMatch) {
    const productId = dynamicMatch[1];
    const render = routes[ROUTES.PRODUCT];
    const html = await render(productId);
    updateDOM(html);
    return true;
  }
  return false;
};
// 로그인 경로 처리 함수
const handleLoginRedirect = () => {
  const refreshToken = getCookie(COOKIE_KEYS.REFRESH_TOKEN);
  if (refreshToken) {
    alert("이미 로그인된 사용자입니다. 메인 페이지로 이동합니다.");
    window.location.href = ROUTES.HOME;
    return true;
  }
  return false;
};
// 라우터 함수
export const router = async () => {
  const path = window.location.pathname;

  // 로그인 경로 처리
  if (path === ROUTES.LOGIN && handleLoginRedirect()) return;
  if (path === ROUTES.SIGNUP && handleLoginRedirect()) return;

  // 동적 경로 처리
  if (await handleDynamicRoute(path)) return;

  // 정적 경로 처리
  const render = routes[path] || routes[ROUTES.NOT_FOUND];
  const html = await render();
  updateDOM(html);
};
// 초기화 함수
const initializeApp = () => {
  // 로드되었을 때
  window.addEventListener("DOMContentLoaded", () => {
    router();
  });

  // 브라우저 앞으로/뒤로가기 했을 때
  window.addEventListener("popstate", router);
};
initializeApp();
```
